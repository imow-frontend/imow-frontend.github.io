---
title: 修改img的src属性刷新图片时，图片地址相同图片无变化的问题
date: 2019-12-18 15:59:04
author: 胡豪
categories: 
- JavaScript 
tags:
- js基础
---


## 前言
修改img的src属性刷新图片时，如果图片地址相同，图片无变化的问题

最主要的原因浏览器会有缓存，它会认为图片没有变化，是相同的

项目中需要上传图片预览.但是第二次上传图片显示的时候发现之前的图片没有改变.后经过分析发现是地址相同第二次改变img src属性的时候图片未发生改变,浏览器第二次不会去请求服务器 

解决方案很easy:
在修改img的src属性的时候加上一个随机数即可,让浏览器以为每次请求的服务器都不同.
```js
image.attr('src', data.message+'?'+Math.random());

//当然不用随机数，也可以用个当前时间的时间戳
```
